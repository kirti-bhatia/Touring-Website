var variationResponse,destinationResponse,qrmilesItems,layoutArray=[],faresData=[],variationURL="/content/Qatar/common/json/variation.json",scrollDPC=!1,selectedVal,isbxMLRecommens="",bxQmEventID,isNonLoginFlow,isLoggedQmUser,lmitedOffersLabel,boxeverQmViewEvents=[],newBXDestiantions=[],reconnectBXDestiantions=[],trendingBXDestiantions=[],bxEventsMap=new Map,boxeverQmEventsMap=new Map,bxOverlayItems=[],boxeverViewhEvents=[],gbbxsuggestionLength=0,qmileItemsMap=new Map,lang=$("#langpagename").val();
"in_id"==lang&&(lang="in");
function destinationPriceComponentNew(){var a="undefined"!=typeof flowExecutionResponse?flowExecutionResponse:"",b="",e=$("#destinationPrice-details").data("dp-routestype"),f=$("#destinationPrice-details").data("dp-origins"),c=$("#destinationPrice-details").data("dp-disablegeolocation")?$("#destinationPrice-details").data("dp-disablegeolocation"):!1,d=$("#destinationPrice-details").data("dp-origindefault");void 0!=$(".destinationpricecomponent").html()&&getVariationResponse();selectedVal=void 0==
window.shortHand||null==window.shortHand||""==window.shortHand||c?void 0!=d&&null!=d&&c?d.trim():$("#boxeverDefaultOrigin").val():window.shortHand;void 0!=selectedVal&&"all"!=e&&-1==f.indexOf(selectedVal)&&(b="selectedRoutes");c=-1<navigator.userAgent.indexOf("Firefox");d=-1<navigator.userAgent.indexOf("Trident/");c||d?setTimeout(function(){var c=window.cityListJSON.filter(function(a,c){return a.shorthand==selectedVal});$("#destinationPrice-from").bwAutocomplete();$("#destinationPrice-from").trigger("typeahead:selected",
c);""!=b?handleDestinationsResponse(a,c[0].shorthand,"all"):handleDestinationsResponse(a,c[0].shorthand,e);$("#destinationPrice-from").on("typeahead:selected",function(c,b){c=void 0!=f&&-1!=f.indexOf(b.shorthand)?e:"all";handleDestinationsResponse(a,b.shorthand,c)})},100):(c=window.cityListJSON.filter(function(a,c){return a.shorthand==selectedVal}),$("#destinationPrice-from").bwAutocomplete(),$("#destinationPrice-from").trigger("typeahead:selected",c),""!=b?handleDestinationsResponse(a,c[0].shorthand,
"all"):handleDestinationsResponse(a,c[0].shorthand,e),$("#destinationPrice-from").on("typeahead:selected",function(c,b){c=void 0!=f&&-1!=f.indexOf(b.shorthand)?e:"all";handleDestinationsResponse(a,b.shorthand,c)}));$(".dpccards").on("click",".componentcards",function(){768>$(window).width()&&($(this).find(".qmilesoffer").length?($(this).find(".modal").modal(),$(this).find(".overlayResponsive").addClass("qmiles-mob-content"),$(this).find(".overlayResponsive").html($(this).find(".overlay").html())):
$(this).hasClass("bigcard")||($(this).find(".modal").modal(),$(this).find(".overlayResponsive").html($(this).find(".overlay").html())))});$(".dpccards").on("click",".componentcards .close",function(a){a.stopPropagation();$(this).closest(".modal").modal("hide")});if(!scrollDPC){for(c=0;c<boxeverViewhEvents.length;c++)sendBXTrackingEventNew(boxeverViewhEvents[c]);if(isLoggedQmUser)for(c=0;c<boxeverQmViewEvents.length;c++)sendBXTrackingEventNew(boxeverQmViewEvents[c]);scrollDPC=!0}}
function getVariationResponse(){try{$.ajax({type:"GET",dataType:"json",url:variationURL,async:!1,success:function(a){variationResponse=a}})}catch(a){}}
function getDestinationResponse(a,b){var e=$("#destinationPrice-disable").data("bx-disable-recommendation"),f=$("#destinationPrice-details").data("dp-currentpagepath");f=f.replace(".html","");f=f.replace(".mobile","");var c=$("#destinationPrice-details").data("dp-currentnode"),d=Granite.I18n.get("newdestinationprie.noresult"),h=[];1!=e&&(h=JSON.stringify(bxOverlayItems));try{$.ajax({type:"GET",dataType:"json",url:f+".newHomepageDestinationPrice."+c+"."+b+"."+a+(void 0!=h&&'""'!=h&&"[]"!=h&&""!=h?
"."+h:"")+".json",async:!1,success:function(c){destinationResponse=c;$(".dpccards .skeleton-loading").css({position:"absolute",opacity:"0"});$(".dpccards .post-content-wrapper").empty();layoutArray=[];if(void 0==destinationResponse.destnRepoData||$.isEmptyObject(destinationResponse.destnRepoData)){$(".dpccards .post-content-wrapper").append('\x3cp class\x3d"no-results" data-errorcode\x3d"155" \x3e'+d+"\x3c/p\x3e");void 0!=window.digitalData&&void 0!=digitalData.page&&(digitalData.page.pageInfo.pageType=
"dp155");c=getPageName(window.location.href);var b=getPagePathData(window.location.href);errorClick(b,"search destinations",c+"-destinationprice",a.trim().toLowerCase())}else displayDpVariations(destinationResponse,a)}})}catch(u){}}function getVariationPosition(a,b){void 0!=a&&$.each(a[(1==b?0:6==b?5:b)-1],function(a,b){layoutArray.push(b)})}
function dpFormatDate(a){a=new Date(a);var b=Granite.I18n.get("booking.month."+"january february march april may june july august september october november december".split(" ")[a.getMonth()]);b="ar"!=lang?b.substr(0,3):b;return(10>a.getDate()?"0":"")+a.getDate()+" "+b+" "+a.getFullYear()}function getDestFares(a,b){var e=[],f=b.toUpperCase();"premium"==b&&(f="PREMIUIM");void 0!=a&&$.each(a,function(a,b){b.cabinClass==f&&e.push(b)});return e}
function displayDpVariations(a,b){var e=a.destnRepoData[b],f=a.pricingResponse,c=0<f.length?a.pricingResponse[0].destinationFares:"",d=[];$.each(e,function(a,b){void 0!=b&&(b=JSON.parse(b.replace(/'/g,'"')),void 0!=c[b.destinationIata]&&d.push(e[a]))});getVariationPosition(variationResponse,d.length);a=$("#destinationPrice-details");var h=a.attr("data-dp-limitedtimelabel"),u=a.attr("data-dp-booknowlabel"),p=a.attr("data-dp-explorelabel"),k=a.attr("data-dp-fromtextvalidation"),n=Granite.I18n.get("Economy"),
B=Granite.I18n.get("destinationprice.premium"),C=Granite.I18n.get("destinationprice.cabin.from"),D=$("#homepageFaresiid").val(),q=$("#discoveriid").val(),y=void 0!=$("#boxeverIID").val()&&""!=$("#boxeverIID").val()?$("#boxeverIID").val():"ALL59705690";a=void 0!=$("#boxeverMLIID").val()&&""!=$("#boxeverMLIID").val()?$("#boxeverMLIID").val():"ALL21786150";b=void 0!=$("#boxeverFLBIID").val()&&""!=$("#boxeverFLBIID").val()?$("#boxeverFLBIID").val():"ALL45269580";var E=void 0!=$("#boxeverQmilesIID").val()&&
""!=$("#boxeverQmilesIID").val()?$("#boxeverQmilesIID").val():"ALL46958740";getFFPCookieValue("QRTOKEN");var z=$("#accReq").val()?"*":"";"DR"==isbxMLRecommens?y=a:"FLB"==isbxMLRecommens&&(y=b);$(".dpccards .post-content-wrapper").append('\x3cdiv class\x3d"flex-rows flex-rows-columns  pt-0 px-0 mt-md-3 mt-0 topRow"\x3e\x3c/div\x3e\x3cdiv class\x3d"flex-rows px-0 pt-0 bottomRow"\x3e\x3c/div\x3e');$.each(d,function(a,b){var d="";b=JSON.parse(b.replace(/'/g,'"'));var g=getDestFares(c[b.destinationIata],
b.cabinType),e=0!=qmileItemsMap.size&&void 0!=qmileItemsMap.get(b.destinationIata)?qmileItemsMap.get(b.destinationIata):"",r=Granite.I18n.get("dashboard.recommender.redeemlabel"),t="",F=Granite.I18n.get("qmiles.cashplusmilestext"),m=isLoggedQmUser&&void 0!=e.qmiles&&void 0!=g[0]&&"ECONOMY"===g[0].cabinClass?!0:!1,l="",w=m&&void 0!=e.redeemType?e.redeemType:"";"redeem"===w?t=Granite.I18n.get("qmiles")+" + "+Granite.I18n.get("qmiles.taxes"):"qmilespluscash"===w?t=Granite.I18n.get("dashboard.recommender.milespluscashlabel"):
l="onlyFares";var G='\x3cdiv class\x3d"horizontal-decor"\x3e\x3cspan\x3e   '+Granite.I18n.get("dashboard.recommender.redeemorlabel")+"   \x3c/span\x3e\x3c/div\x3e";e=m?'\x3cspan class\x3d"miles-details"\x3e\x3cspan class\x3d"qmiles-fare"\x3e'+e.qmiles+"\x3c/span\x3e "+t+"\x3c/span\x3e":"";t=void 0!=g[0]&&0!=g[0].length?g[0].deepLink+"\x26iid\x3d"+(void 0!=bxEventsMap.get(b.destinationIata)?y:D):"";var H=void 0!=g[0]&&0!=g[0].length?g[0].deepLink+"\x26qmilesFlow\x3dtrue\x26paymentMode\x3dqmiles\x26iid\x3d"+
E:"",v="true"==b.limitedOfferCode?'\x3cdiv class\x3d"flylabel"\x3e'+h+"\x3c/div\x3e":"";void 0!=bxEventsMap.get(b.destinationIata)&&-1!=newBXDestiantions.indexOf(b.destinationIata)?v='\x3cdiv class\x3d"flylabel"\x3e'+Granite.I18n.get("boxever.newdestiantionlabel")+"\x3c/div\x3e":void 0!=bxEventsMap.get(b.destinationIata)&&-1!=reconnectBXDestiantions.indexOf(b.destinationIata)?v='\x3cdiv class\x3d"flylabel"\x3e'+Granite.I18n.get("boxever.reconnectlabel")+"\x3c/div\x3e":void 0!=bxEventsMap.get(b.destinationIata)&&
-1!=trendingBXDestiantions.indexOf(b.destinationIata)&&(v='\x3cdiv class\x3d"flylabel"\x3e'+Granite.I18n.get("boxever.trendinglabel")+"\x3c/div\x3e");lmitedOffersLabel=!isNonLoginFlow||null!=getFFPCookieValue("QRTOKEN")&&""!=getFFPCookieValue("QRTOKEN")?0!=qmileItemsMap.size?Granite.I18n.get("qmiles.drOfferlabel"):v:Granite.I18n.get("qmiles.drnonloginOfferlabel");if(void 0!=layoutArray[a]){"horizontal1"==layoutArray[a].imageRendition?""!=b.horizontalImage&&(d=b.horizontalImage+"/jcr:content/renditions/rendition."+
layoutArray[a].imageRenditionSize+".jpg"):"horizontal2"==layoutArray[a].imageRendition?""!=b.horizontalImage2&&(d=b.horizontalImage2+"/jcr:content/renditions/rendition."+layoutArray[a].imageRenditionSize+".jpg"):"horizontal3"==layoutArray[a].imageRendition&&""!=b.horizontalImage3&&(d=b.horizontalImage3+"/jcr:content/renditions/rendition."+layoutArray[a].imageRenditionSize+".jpg");var x="true"!=k?n+" "+C:n;void 0!=g[0]&&"PREMIUIM"==g[0].cabinClass&&(x="true"!=k?B+" "+C:B);var A=void 0!=g[0]&&0!=g[0].length?
dpFormatDate(g[0].outboundDate)+" - "+dpFormatDate(g[0].inboundDate):"";"ar"!=lang&&m&&"cashplusqmiles"!==w?(lmitedOffersLabel='\x3cdiv class\x3d"flylabel"\x3e'+lmitedOffersLabel+"\x3c/div\x3e",m=void 0!=g[0]&&0!=g[0].length?'\x3cdiv class\x3d"flight-fare"\x3e\x3cspan\x3e'+Granite.I18n.get("dashboard.recommender.redeemorlabel")+" \x3c/span\x3e"+f[0].currencyCode+" "+g[0].lowestFare+z+"\x3c/div\x3e":"",l='\x3cdiv class\x3d"overlay qmilesoffer"\x3e\x3cdiv class\x3d"carddetails"\x3e\x3ch4 class\x3d"recommender-place-name"\x3e'+
b.destinationTitle+"\x3c/h4\x3e",r='\x3cdiv class\x3d"flight-date"\x3e'+A+"\x3c/div\x3e"+('\x3cdiv class\x3d"flight-class"\x3e'+x+"\x3c/div\x3e")+e+'\x3ca class\x3d"offer-button-book w-100 mb-3" href\x3d"'+H+'"'+(void 0!=boxeverQmEventsMap.get(b.destinationIata)?"onclick\x3d\"return sendBXTrackingEventNew('"+boxeverQmEventsMap.get(b.destinationIata)+"');\"":"")+"\x3e"+r+"\x3c/a\x3e"+G+m+'\x3c/div\x3e\x3cdiv class\x3d"btns-container col-12 mt-2"\x3e\x3ca class\x3d"offer-button-discover w-100" href\x3d"'+
t+'"'+(void 0!=bxEventsMap.get(b.destinationIata)?"onclick\x3d\"return sendBXTrackingEventNew('"+bxEventsMap.get(b.destinationIata)+"');\"":"")+"\x3e"+u+"\x3c/a\x3e\x3c/div\x3e"):"ar"!=lang&&0!=qmileItemsMap.size&&"cashplusqmiles"===w?(lmitedOffersLabel='\x3cdiv class\x3d"flylabel"\x3e'+lmitedOffersLabel+"\x3c/div\x3e",m=void 0!=g[0]&&0!=g[0].length?'\x3cdiv class\x3d"cardcost"\x3e'+f[0].currencyCode+" "+g[0].lowestFare+z+"\x3c/div\x3e":"",l='\x3cdiv class\x3d"overlay qmilesoffer '+l+'"\x3e\x3cdiv class\x3d"carddetails"\x3e\x3ch3\x3e'+
b.destinationTitle+"\x3c/h3\x3e",r='\x3cdiv class\x3d"duration"\x3e'+A+"\x3c/div\x3e"+('\x3cdiv class\x3d"cardclasstype"\x3e'+x+"\x3c/div\x3e")+m+('\x3cdiv class\x3d"saveqmiles-text"\x3e'+F+"\x3c/div\x3e")+'\x3c/div\x3e\x3cdiv class\x3d"btns-container col-12 mt-2"\x3e\x3ca class\x3d"offer-button-book w-100 mb-3" href\x3d"'+t+'"'+(void 0!=bxEventsMap.get(b.destinationIata)?"onclick\x3d\"return sendBXTrackingEventNew('"+bxEventsMap.get(b.destinationIata)+"');\"":"")+"\x3e"+u+'\x3c/a\x3e\x3ca class\x3d"offer-button-discover w-100" href\x3d"'+
b.destinationDetailPageUrl+"?iid\x3d"+q+'"\x3e'+p+"\x3c/a\x3e\x3c/div\x3e"):(lmitedOffersLabel=v,m=void 0!=g[0]&&0!=g[0].length?'\x3cdiv class\x3d"cardcost"\x3e'+f[0].currencyCode+" "+g[0].lowestFare+z+"\x3c/div\x3e":"",l='\x3cdiv class\x3d"overlay"\x3e\x3cdiv class\x3d"carddetails"\x3e\x3ch3\x3e'+b.destinationTitle+"\x3c/h3\x3e",r='\x3cdiv class\x3d"duration"\x3e'+A+"\x3c/div\x3e"+('\x3cdiv class\x3d"cardclasstype"\x3e'+x+"\x3c/div\x3e")+m+'\x3c/div\x3e\x3cdiv class\x3d"btns-container col-12 mt-2"\x3e\x3ca class\x3d"offer-button-book w-100 mb-3" href\x3d"'+
t+'"'+(void 0!=bxEventsMap.get(b.destinationIata)?"onclick\x3d\"return sendBXTrackingEventNew('"+bxEventsMap.get(b.destinationIata)+"');\"":"")+"\x3e"+u+'\x3c/a\x3e\x3ca class\x3d"offer-button-discover w-100" href\x3d"'+b.destinationDetailPageUrl+"?iid\x3d"+q+'"\x3e'+p+"\x3c/a\x3e\x3c/div\x3e");if(0==a)0<g.length?$(".dpccards .post-content-wrapper").find(".topRow").append('\x3cdiv class\x3d"flex-rows-child pr-md-2 col-12 col-md-6 px-0"\x3e\x3cdiv tabindex\x3d"0" class\x3d"componentcards '+layoutArray[a].cols+
'"\x3e'+lmitedOffersLabel+'\x3cpicture\x3e\x3csource srcset\x3d"'+d+'" media\x3d"(min-width: 800px)"\x3e\x3cimg src\x3d"'+d+'" alt\x3d"" /\x3e\x3c/picture\x3e'+l+'\x3ca href\x3d"'+b.destinationDetailPageUrl+"?iid\x3d"+q+'" class\x3d"discover-mobile d-sm-none d-md-none d-lg-none"\x3e\x3cspan class\x3d"icon-arrow-right3"\x3e\x3c/span\x3e\x3c/a\x3e'+r+'\x3c/div\x3e\x3cdiv class\x3d"modal"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cspan class\x3d"close" aria-label\x3d"Close"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"overlayResponsive"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"flex-rows-break"\x3e\x3c/div\x3e'):
$(".dpccards .post-content-wrapper").find(".topRow").append('\x3cdiv class\x3d"flex-rows-child pr-md-2 col-12 col-md-6 px-0"\x3e\x3cdiv tabindex\x3d"0" class\x3d"componentcards '+layoutArray[a].cols+'"\x3e'+lmitedOffersLabel+'\x3cpicture\x3e\x3csource srcset\x3d"'+d+'" media\x3d"(min-width: 800px)"\x3e\x3cimg src\x3d"'+d+'" alt\x3d"" /\x3e\x3c/picture\x3e'+l+'\x3ca href\x3d"'+b.destinationDetailPageUrl+"?iid\x3d"+q+'" class\x3d"discover-mobile d-sm-none d-md-none d-lg-none"\x3e\x3cspan class\x3d"icon-arrow-right3"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"btns-container col-12 mt-2"\x3e\x3ca class\x3d"offer-button-discover w-100" href\x3d"'+
b.destinationDetailPageUrl+"?iid\x3d"+q+'"\x3e'+p+'\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cspan class\x3d"close" aria-label\x3d"Close"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"overlayResponsive"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"flex-rows-break"\x3e\x3c/div\x3e');else if(5>a){if("true"==layoutArray[a].isparent&&$(".dpccards .post-content-wrapper").find(".topRow").append('\x3cdiv class\x3d"flex-rows-child '+
layoutArray[a].parentClass+'"\x3e\x3cdiv class\x3d"flex-rows py-0 px-0" id\x3d"top-cards-inner-'+layoutArray[a].teaserId+'"\x3e\x3c/div\x3e\x3c/div\x3e'),0<g.length?$(".dpccards .post-content-wrapper").find(".topRow").find("#top-cards-inner-"+layoutArray[a].teaserId).append('\x3cdiv class\x3d"flex-rows-child small flex-fill '+layoutArray[a].cols+'"\x3e\x3cdiv tabindex\x3d"0" class\x3d"componentcards"\x3e'+lmitedOffersLabel+'\x3cpicture\x3e\x3csource srcset\x3d"'+d+'" media\x3d"(min-width: 800px)"\x3e\x3cimg src\x3d"'+
d+'" alt\x3d"" /\x3e\x3c/picture\x3e'+l+r+'\x3c/div\x3e\x3cdiv class\x3d"modal"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cspan class\x3d"close" aria-label\x3d"Close"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"overlayResponsive"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'):$(".dpccards .post-content-wrapper").find(".topRow").find("#top-cards-inner-"+layoutArray[a].teaserId).append('\x3cdiv class\x3d"flex-rows-child small flex-fill '+layoutArray[a].cols+
'"\x3e\x3cdiv tabindex\x3d"0" class\x3d"componentcards"\x3e'+lmitedOffersLabel+'\x3cpicture\x3e\x3csource srcset\x3d"'+d+'" media\x3d"(min-width: 800px)"\x3e\x3cimg src\x3d"'+d+'" alt\x3d"" /\x3e\x3c/picture\x3e'+l+'\x3c/div\x3e\x3cdiv class\x3d"btns-container col-12 mt-2"\x3e\x3ca class\x3d"offer-button-discover w-100" href\x3d"'+b.destinationDetailPageUrl+"?iid\x3d"+q+'"\x3e'+p+'\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cspan class\x3d"close" aria-label\x3d"Close"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"overlayResponsive"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
768>$(window).width()&&3==a)return!1}else"true"==layoutArray[a].isparent&&$(".dpccards .post-content-wrapper").find(".bottomRow").append('\x3cdiv class\x3d"flex-rows-child '+layoutArray[a].parentClass+'"\x3e\x3cdiv class\x3d"flex-rows py-0 px-0" id\x3d"bottom-cards-inner-'+layoutArray[a].teaserId+'"\x3e\x3c/div\x3e\x3c/div\x3e'),0<g.length?$(".dpccards .post-content-wrapper").find(".bottomRow").find("#bottom-cards-inner-"+layoutArray[a].teaserId).append('\x3cdiv class\x3d"flex-rows-child small flex-fill '+
layoutArray[a].cols+'"\x3e\x3cdiv tabindex\x3d"0" class\x3d"componentcards"\x3e'+lmitedOffersLabel+'\x3cpicture\x3e\x3csource srcset\x3d"'+d+'" media\x3d"(min-width: 800px)"\x3e\x3cimg src\x3d"'+d+'" alt\x3d"" /\x3e\x3c/picture\x3e'+l+r+'\x3c/div\x3e\x3cdiv class\x3d"modal"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cspan class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"overlayResponsive"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'):
$(".dpccards .post-content-wrapper").find(".bottomRow").find("#bottom-cards-inner-"+layoutArray[a].teaserId).append('\x3cdiv class\x3d"flex-rows-child small flex-fill '+layoutArray[a].cols+'"\x3e\x3cdiv tabindex\x3d"0" class\x3d"componentcards"\x3e'+lmitedOffersLabel+'\x3cpicture\x3e\x3csource srcset\x3d"'+d+'" media\x3d"(min-width: 800px)"\x3e\x3cimg src\x3d"'+d+'" alt\x3d"" /\x3e\x3c/picture\x3e'+l+'\x3c/div\x3e\x3cdiv class\x3d"btns-container col-12 mt-2"\x3e\x3ca class\x3d"offer-button-discover w-100" href\x3d"'+
b.destinationDetailPageUrl+"?iid\x3d"+q+'"\x3e'+p+'\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cspan class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"overlayResponsive"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')}})}
function handleDestinationsResponse(a,b,e){var f=void 0!=a&&void 0!=a.offerContent&&void 0!=a.offerContent.eventID&&""!=a.offerContent.eventID?a.offerContent.eventID:"HPDR_FD";"control"==(void 0!=a&&void 0!=a.offerContent&&void 0!=a.offerContent.variant&&""!=a.offerContent.variant?a.offerContent.variant:"")&&sendBXTrackingEvent(f+"_CONTROL_SESSION");if("undefined"!=typeof a&&void 0!=a.offerContent){var c=void 0!=a.offerContent.items?a.offerContent.items:null;void 0!=a.offerContent.newitems&&(newBXDestiantions=
void 0!=a.offerContent.newitems.newDests?a.offerContent.newitems.newDests:[],reconnectBXDestiantions=void 0!=a.offerContent.newitems.reconnect?a.offerContent.newitems.reconnect:[],trendingBXDestiantions=void 0!=a.offerContent.newitems.trending?a.offerContent.newitems.trending:[]);qrmilesItems=void 0!=a.offerContent.qmilesitems?a.offerContent.qmilesitems:"";isNonLoginFlow=void 0!=a.offerContent.nonLoginFlow&&""!=a.offerContent.nonLoginFlow?a.offerContent.nonLoginFlow:!1;bxQmEventID=void 0!=a.offerContent.qmileseventID&&
""!=a.offerContent.qmileseventID?a.offerContent.qmileseventID:"HPFD_QDR";isLoggedQmUser=null!==getFFPCookieValue("QRTOKEN")&&""!==getFFPCookieValue("QRTOKEN")||isNonLoginFlow;var d=""!=qrmilesItems&&0!=qrmilesItems.length&&void 0!=qrmilesItems[0].destinations&&0<qrmilesItems[0].destinations.length?qrmilesItems[0].destinations:null;if(null!=d)for(var h=0;h<d.length;h++)qmileItemsMap.set(d[h].destinationIata,d[h]),boxeverQmViewEvents.push(bxQmEventID+"_"+d[h].destinationIata+"_POS"+h+"_VIEWED"),boxeverQmEventsMap.set(d[h].destinationIata.toUpperCase(),
bxQmEventID+"_"+d[h].destinationIata+"_POS"+h+"_CLICKED");else qmileItemsMap.clear();void 0!=a.offerContent.modelOuput&&(isbxMLRecommens=a.offerContent.modelOuput);null!=c&&0<c.length?handleRecomondations(b,e,c,f):getDestinationResponse(b,e)}else return getDestinationResponse(b,e),null}
function handleRecomondations(a,b,e,f){bxOverlayItems=[];for(var c=0;c<e.length;c++)if(destinRegionCheck(e[c])){var d=e[c];bxEventsMap.set(d.destinationIata.toUpperCase(),f+"_"+d.destinationIata+"_POS"+c+"_CLICKED");bxOverlayItems.push(d.destinationIata);boxeverViewhEvents.push(f+"_"+d.destinationIata+"_POS"+c+"_VIEWED");void 0===boxeverQmEventsMap.get(d.destinationIata)&&(boxeverQmViewEvents.push(f+"_"+d.destinationIata+"_POS"+c+"_VIEWED"),boxeverQmEventsMap.set(d.destinationIata.toUpperCase(),f+
"_"+d.destinationIata+"_POS"+c+"_CLICKED"))}0<bxOverlayItems.length&&(gbbxsuggestionLength=bxOverlayItems.length-1,getDestinationResponse(a,b))}
function destinRegionCheck(a){a=a.destinationIata;var b=!0,e="PEN KUL DAC MLE PEK CAN PVG CTU CKG NAG TRV CCU BOM MAA GOI AMD CCJ COK ATQ DEL HYD BLR MNL CRK HKG PNH KBV BKK HKT CNX DPS CGK CBR SYD MEL ADL PER SIN CMB KHI ISB LYP SKT PEW LHE MUX ICN AKL RGN SGN DAD HAN KTM NRT HND".split(" "),f="IAH JFK MIA BOS LAX ATL DFW IAD PHL ORD EZE YUL GRU".split(" "),c="MAD BCN AGP EVN WAW DUB CPH BEG TXL MUC FRA CDG NCE OSL OTP LCA GYD ZAG ATH JMK SKG KBP BHX MAN CWL EDI LGW LHR BUD AMS GVA ZRH SKP HEL FCO MXP PSA VCE SOF BRU PRG GOT ARN SJJ DME LED HTY IST SAW AYT ADA BJV ESB TBS VIE".split(" "),
d="ALG LOS JIB EBB WDH JRO ZNZ DAR KRT ADD KGL TUN MBA NBO CPT JNB DUR SEZ CMN RAK MPM".split(" "),h=["IFN","MHD","IKA","SYZ"],u=["MCT","OHS","SLL"],p=["BSR","EBL","ISU","NJF","BGW"],k=$.grep(window.cityListJSON,function(a,b){return a.shorthand==selectedVal});console.log("ML recomm region country: "+k[0].countryCode);k=null!=k[0].countryCode&&void 0!=k[0].countryCode?k[0].countryCode:"global";var n=getRegionFromCountry(k.toLowerCase());return"qa"===k.toLowerCase()&&"DOH"==a||"kw"===k.toLowerCase()&&
"KWI"==a||"jo"===k.toLowerCase()&&"AMM"==a||"lb"===k.toLowerCase()&&"BEY"==a||"ir"===k.toLowerCase()&&-1!==h.indexOf(a)||"iq"===k.toLowerCase()&&-1!==p.indexOf(a)||"om"===k.toLowerCase()&&-1!==u.indexOf(a)||""!==n&&("asiapacific"===n.toLowerCase()&&-1!==e.indexOf(a)||"americas"===n.toLowerCase()&&(-1!==f.indexOf(a)||-1!==c.indexOf(a))||"europe"===n.toLowerCase()&&(-1!==c.indexOf(a)||-1!==f.indexOf(a))||"africa"===n.toLowerCase()&&-1!==d.indexOf(a))?b=!1:b};